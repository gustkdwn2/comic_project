<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.comic.mapper.SalesStatisticsMapper">
	<select id="productsalesData"
		resultType="com.comic.model.SalesStatisticsVO">
		SELECT * FROM COMIC_PRODUCTSALES WHERE TO_CHAR(PRODUCTSALES_TIME,'YY') = #{year}
	</select>

	<select id="roomsalesData"
		resultType="com.comic.model.SalesStatisticsVO">
		SELECT * FROM COMIC_ROOMSALES WHERE 
		TO_CHAR(ROOMSALES_TIME,'YY') = #{year}
	</select>
	
	<select id="productsalesDayData"
		resultType="com.comic.model.SalesStatisticsVO">
		SELECT * FROM COMIC_PRODUCTSALES WHERE TO_CHAR(PRODUCTSALES_TIME,'YYMM') = #{yearmonth}
	</select>

	<select id="roomsalesDayData"
		resultType="com.comic.model.SalesStatisticsVO">
		SELECT * FROM COMIC_ROOMSALES WHERE 
		TO_CHAR(ROOMSALES_TIME,'YYMM') = #{yearmonth}
	</select>
	
	<select id="productsales" resultType="com.comic.model.SalesStatisticsVO">
		SELECT * FROM (SELECT SUM(PRODUCTSALES_ORDER_PRICE*PRODUCTSALES_QTY) AS PRODUCTSALES_ORDER_PRICE, PRODUCTSALES_PRODUCT 
		FROM COMIC_PRODUCTSALES
		GROUP BY PRODUCTSALES_PRODUCT
		ORDER BY PRODUCTSALES_ORDER_PRICE DESC) WHERE ROWNUM &lt; 6
	</select>
	
	<select id="roomsales" resultType="com.comic.model.SalesStatisticsVO">
		SELECT SUM(ROOMSALES_TOTALPRICE) AS ROOMSALES_TOTALPRICE, ROOMSALES_NUM FROM COMIC_ROOMSALES GROUP BY ROOMSALES_NUM
	</select>
</mapper>