<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.comic.mapper.ManagementMapper">	
	
	<select id="employeelist"
		resultType="com.comic.model.EmployeeVO">
		select * from comic_employee order by employee_num
	</select>
	
	<delete id="deletemng">
	delete from comic_employee where employee_pwd=#{emppwd} and employee_num=#{mngnum}
	</delete>
	
	<select id="managerlogin"
		resultType="Integer">
		select count(*) from comic_employee where employee_num=#{empnum} and employee_pwd=#{emppwd}
	</select>
	
	<select id="managerloginrecord"
		resultType="Integer">
		SELECT count(*) FROM comic_workinghour 
		WHERE TO_CHAR(workinghour_workday, 'YYMMDD')
		 = #{todaydate} and workingHour_emp_num=#{empnum}
	</select>
	
	<insert id="managerattendance">
		insert into comic_workinghour 
		(workinghour_emp_num,workinghour_starttime,workinghour_workday) 
		values(#{empnum},sysdate,sysdate)
	</insert>
	
	<update id="managerleavework">
	update comic_workinghour set workinghour_endtime=sysdate where workingHour_emp_num=#{empnum}
	</update>
	
	
	
</mapper>